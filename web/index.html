<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>QuickFinder</title>
        <link href="https://cdn.tailwindcss.com" rel="stylesheet">
        <script type="text/javascript" src="/eel.js"></script>
        <script type="text/javascript">
        eel.expose(printToConsole);
        function printToConsole(message) {
            const log = document.getElementById('log');
            log.innerHTML += message + '<br>';
        }

        eel.expose(updateIndex);
        function updateIndex() {
            eel.update_index();  // Call the Python function
        }
        
        async function processFiles() {
            let path = document.getElementById('path').value;
            let pattern = document.getElementById('pattern').value;
            let files = await eel.process_files(path, pattern)();
            if (files.length > 0) {
                printToConsole(`Found ${files.length} files matching '${pattern}':`);
                files.forEach(file => {
                    // Assuming 'file' has 'name' and 'path' properties
                    let fileInfo = `Name: ${file.name}, Path: ${file.path}`;
                    printToConsole(fileInfo);
                });
            }
        }
        
    </script>
    </head>
    <body>
        <input type="text" id="path" placeholder="Enter directory path">
        <input type="text" id="pattern" placeholder="Enter search pattern">
        <button onclick="processFiles()">Process Files</button>
        <button onclick="updateIndex()">Update Index</button>
        <div id="log"></div>
    </body>
</html>
